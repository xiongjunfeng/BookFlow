# 图书管理系统需求分析文档

## 1. 项目概述

### 1.1 项目背景

随着信息技术的发展，传统的手工图书管理方式已无法满足现代图书馆的管理需求。为了提高图书管理效率，实现图书借阅归还的自动化、规范化管理，需要开发一套功能完善的图书管理系统。

### 1.2 项目目标

开发一套前后端分离的图书管理系统，实现以下目标：
- 实现用户注册登录与基于角色的权限管理
- 为管理员提供独立的图书管理后台
- 为用户提供图书搜索、借阅与归还功能
- 完整记录用户的借阅历史
- 确保图书库存数量随借阅、归还操作实时准确更新

### 1.3 适用范围

本系统适用于中小型图书馆或图书管理机构，支持管理员和普通用户两种角色使用。

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册
- **功能描述**：允许用户通过邮箱/手机号注册账号
- **输入**：用户名、密码、确认密码、邮箱/手机号
- **输出**：注册成功提示或错误信息
- **约束**：用户名唯一，密码长度不少于8位

#### 2.1.2 用户登录
- **功能描述**：允许已注册用户登录系统
- **输入**：用户名/邮箱/手机号、密码
- **输出**：登录成功跳转或错误信息
- **约束**：支持记住密码功能

#### 2.1.3 角色管理
- **功能描述**：管理员可管理用户角色
- **输入**：用户ID、角色类型（管理员/普通用户）
- **输出**：角色分配成功提示
- **约束**：仅管理员可操作

#### 2.1.4 用户信息管理
- **功能描述**：管理员可查看、编辑、删除所有用户信息
- **输入**：用户ID、用户信息
- **输出**：操作成功提示或错误信息
- **约束**：仅管理员可操作

### 2.2 图书管理模块

#### 2.2.1 图书添加
- **功能描述**：管理员可添加新图书信息
- **输入**：图书编号、书名、作者、出版社、出版日期、分类、价格、库存数量、封面图片
- **输出**：添加成功提示或错误信息
- **约束**：图书编号唯一，必填项不能为空

#### 2.2.2 图书查询
- **功能描述**：管理员可查询所有图书信息
- **输入**：查询条件（可选）
- **输出**：图书列表
- **约束**：支持分页查询

#### 2.2.3 图书编辑
- **功能描述**：管理员可编辑图书信息
- **输入**：图书ID、更新的图书信息
- **输出**：编辑成功提示或错误信息
- **约束**：仅管理员可操作

#### 2.2.4 图书删除
- **功能描述**：管理员可删除图书信息
- **输入**：图书ID
- **输出**：删除成功提示或错误信息
- **约束**：仅管理员可操作，有库存的图书不可直接删除

### 2.3 图书借阅归还模块

#### 2.3.1 图书搜索
- **功能描述**：用户可根据关键词搜索图书
- **输入**：搜索关键词（书名、作者、出版社等）
- **输出**：符合条件的图书列表
- **约束**：支持模糊搜索，显示图书库存状态

#### 2.3.2 图书借阅
- **功能描述**：用户可借阅可借图书
- **输入**：图书ID
- **输出**：借阅成功提示或错误信息
- **约束**：用户需登录，图书库存大于0

#### 2.3.3 图书归还
- **功能描述**：用户可归还已借图书
- **输入**：图书ID
- **输出**：归还成功提示或错误信息
- **约束**：用户需登录，图书必须是用户已借图书

#### 2.3.4 借阅历史查询
- **功能描述**：用户可查询自己的借阅历史
- **输入**：查询条件（可选）
- **输出**：借阅历史列表
- **约束**：用户需登录

## 3. 非功能需求

### 3.1 性能需求
- **响应时间**：系统页面响应时间不超过2秒
- **并发用户数**：支持至少50个并发用户同时访问
- **数据处理能力**：图书借阅归还操作响应时间不超过1秒

### 3.2 安全需求
- **用户认证**：采用JWT令牌认证机制
- **权限控制**：基于角色的访问控制（RBAC）
- **数据加密**：用户密码采用BCrypt加密存储
- **防止SQL注入**：所有数据库操作采用参数化查询

### 3.3 兼容性需求
- **操作系统**：支持Windows 10操作系统
- **浏览器**：支持Chrome、Firefox、Safari、Edge等主流浏览器
- **分辨率**：支持1024x768及以上分辨率

### 3.4 可用性需求
- **系统可用性**：系统可用性达到99%
- **界面友好性**：操作界面简洁直观，易于使用
- **错误提示**：提供清晰的错误提示信息

### 3.5 可维护性需求
- **代码规范**：遵循统一的代码规范
- **文档完善**：提供详细的技术文档和使用文档
- **模块化设计**：采用模块化设计，便于扩展和维护

## 4. 数据需求

### 4.1 数据模型设计

#### 4.1.1 用户表（users）
| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | INT | PRIMARY KEY, AUTO_INCREMENT | 用户ID |
| username | VARCHAR(50) | NOT NULL, UNIQUE | 用户名 |
| password | VARCHAR(100) | NOT NULL | 密码 |
| email | VARCHAR(100) | UNIQUE | 邮箱 |
| phone | VARCHAR(20) | UNIQUE | 手机号 |
| role | VARCHAR(20) | NOT NULL, DEFAULT 'user' | 角色（admin/user） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |

#### 4.1.2 图书表（books）
| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | INT | PRIMARY KEY, AUTO_INCREMENT | 图书ID |
| book_no | VARCHAR(50) | NOT NULL, UNIQUE | 图书编号 |
| title | VARCHAR(100) | NOT NULL | 书名 |
| author | VARCHAR(50) | NOT NULL | 作者 |
| publisher | VARCHAR(100) | NOT NULL | 出版社 |
| publish_date | DATE | NOT NULL | 出版日期 |
| category | VARCHAR(50) | NOT NULL | 分类 |
| price | DECIMAL(10,2) | NOT NULL | 价格 |
| stock | INT | NOT NULL, DEFAULT 0 | 库存数量 |
| cover_image | VARCHAR(200) | | 封面图片 |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |

#### 4.1.3 借阅记录表（borrow_records）
| 字段名 | 数据类型 | 约束 | 描述 |
|--------|----------|------|------|
| id | INT | PRIMARY KEY, AUTO_INCREMENT | 记录ID |
| user_id | INT | NOT NULL, FOREIGN KEY | 用户ID |
| book_id | INT | NOT NULL, FOREIGN KEY | 图书ID |
| borrow_date | DATETIME | NOT NULL | 借阅日期 |
| due_date | DATETIME | NOT NULL | 应还日期 |
| return_date | DATETIME | | 实际归还日期 |
| status | VARCHAR(20) | NOT NULL | 状态（borrowed/returned/overdue） |
| created_at | DATETIME | NOT NULL | 创建时间 |
| updated_at | DATETIME | NOT NULL | 更新时间 |

### 4.2 数据关系

- 用户表与借阅记录表：一对多关系（一个用户可有多条借阅记录）
- 图书表与借阅记录表：一对多关系（一本图书可有多条借阅记录）

## 5. 业务流程分析

### 5.1 用户登录流程

1. 用户输入用户名和密码
2. 系统验证用户名和密码
3. 验证通过，生成JWT令牌
4. 系统返回登录成功信息和JWT令牌
5. 用户使用JWT令牌访问系统功能

### 5.2 图书借阅流程

1. 用户搜索图书
2. 查看图书详情，确认可借状态
3. 点击借阅按钮
4. 系统检查用户是否登录
5. 系统检查图书库存
6. 库存充足，生成借阅记录
7. 更新图书库存数量（减1）
8. 返回借阅成功信息

### 5.3 图书归还流程

1. 用户登录系统
2. 查看我的借阅列表
3. 选择要归还的图书，点击归还按钮
4. 系统检查图书是否为用户所借
5. 更新借阅记录的归还日期和状态
6. 更新图书库存数量（加1）
7. 返回归还成功信息

### 5.4 图书添加流程

1. 管理员登录系统
2. 进入图书管理页面
3. 点击添加图书按钮
4. 填写图书信息
5. 系统验证图书编号唯一性
6. 验证通过，保存图书信息
7. 返回添加成功信息

## 6. 系统架构设计

### 6.1 架构模式

采用前后端分离架构：
- **前端**：负责用户界面展示和交互逻辑
- **后端**：负责业务逻辑处理和数据存储
- **数据库**：负责数据持久化存储

### 6.2 技术架构

| 层级 | 技术选型 | 职责 |
|------|----------|------|
| 前端 | Vue 3 + Vite + Element Plus | 用户界面展示，交互逻辑处理 |
| 后端 | Python + Flask | 业务逻辑处理，API接口提供 |
| 数据库 | SQLite | 数据持久化存储 |
| 认证 | JWT | 用户身份认证 |

## 7. 验收标准

### 7.1 功能验收

1. **用户管理**：
   - 成功实现用户注册登录功能
   - 成功实现基于角色的权限管理
   - 管理员可对用户进行增删改查操作

2. **图书管理**：
   - 管理员可成功添加、编辑、删除图书
   - 图书编号唯一性得到保证
   - 图书信息展示正确

3. **借阅归还**：
   - 用户可成功搜索图书
   - 图书借阅功能正常，库存数量正确减少
   - 图书归还功能正常，库存数量正确增加
   - 借阅历史记录完整准确

### 7.2 性能验收

1. 系统页面响应时间不超过2秒
2. 图书借阅归还操作响应时间不超过1秒
3. 支持至少50个并发用户同时访问

### 7.3 安全验收

1. 用户密码采用加密存储
2. 未登录用户无法访问受限功能
3. 普通用户无法访问管理员功能

## 8. 风险分析

### 8.1 技术风险

1. 前后端分离架构的复杂性
2. 数据一致性保证（借阅归还与库存同步）
3. 系统安全性保障

### 8.2 管理风险

1. 需求变更风险
2. 项目进度风险
3. 人员变动风险

### 8.3 应对措施

1. 采用成熟的技术框架和组件
2. 实现事务管理，确保数据一致性
3. 加强系统测试，包括功能测试、性能测试和安全测试
4. 建立完善的项目管理制度，及时沟通和解决问题

## 9. 项目计划

| 阶段 | 时间 | 任务 |
|------|------|------|
| 需求分析 | 1周 | 完成需求分析，编写需求分析文档 |
| 系统设计 | 1周 | 完成系统架构设计和数据库设计 |
| 前端开发 | 2周 | 完成前端页面开发和交互逻辑 |
| 后端开发 | 2周 | 完成后端API开发和业务逻辑 |
| 测试调试 | 1周 | 完成系统测试和调试 |
| 部署上线 | 0.5周 | 完成系统部署和上线 |
| 文档编写 | 0.5周 | 完成用户手册和技术文档编写 |

## 10. 附录

### 10.1 术语定义

- **JWT**：JSON Web Token，用于用户认证的令牌
- **RBAC**：基于角色的访问控制
- **CRUD**：创建（Create）、读取（Read）、更新（Update）、删除（Delete）

### 10.2 参考文档

- 《软件工程导论》
- 《数据库系统概论》
- 相关技术框架官方文档

---

**文档版本**：V1.0
**编写日期**：2025-12-24
**编写人**：AI助手